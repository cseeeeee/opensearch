<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>도서 관리 - Book Search</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: #f5f5f5; color: #333; }
        .header { background: #2c3e50; color: white; padding: 16px 32px; }
        .header h1 { font-size: 20px; }
        .nav { background: #34495e; padding: 0 32px; display: flex; gap: 0; }
        .nav a { color: #bdc3c7; text-decoration: none; padding: 12px 20px; font-size: 14px; }
        .nav a:hover, .nav a.active { color: white; background: #2c3e50; }
        .container { max-width: 1200px; margin: 32px auto; padding: 0 16px; }
        .toolbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .toolbar h2 { font-size: 18px; }
        .btn { padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 13px; text-decoration: none; }
        .btn-primary { background: #3498db; color: white; }
        .btn-primary:hover { background: #2980b9; }
        .btn-danger { background: #e74c3c; color: white; }
        .btn-danger:hover { background: #c0392b; }
        .btn-sm { padding: 5px 10px; font-size: 12px; }
        .message { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; padding: 12px 16px; border-radius: 6px; margin-bottom: 16px; }
        table { width: 100%; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border-collapse: collapse; }
        th { background: #f8f9fa; text-align: left; padding: 12px 16px; font-size: 13px; color: #666; border-bottom: 2px solid #dee2e6; }
        td { padding: 12px 16px; border-bottom: 1px solid #eee; font-size: 14px; }
        tr:hover { background: #f8f9fa; }
        .pagination { display: flex; justify-content: center; gap: 8px; margin-top: 24px; }
        .pagination a, .pagination span { padding: 8px 14px; border-radius: 4px; text-decoration: none; font-size: 13px; }
        .pagination a { background: white; color: #333; border: 1px solid #ddd; }
        .pagination a:hover { background: #3498db; color: white; }
        .pagination span.current { background: #3498db; color: white; }
        .search-bar { display: flex; gap: 8px; margin-bottom: 16px; }
        .search-bar input { flex: 1; padding: 8px 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; }
        .search-bar input:focus { outline: none; border-color: #3498db; }
        .btn-secondary { background: #95a5a6; color: white; }
        .btn-secondary:hover { background: #7f8c8d; }
        .empty { text-align: center; padding: 48px; color: #888; }
        .actions { display: flex; gap: 6px; }
    </style>
</head>
<body>
    <div class="header"><h1>Book Search Admin</h1></div>
    <div class="nav">
        <a href="/admin">대시보드</a>
        <a href="/admin/books" class="active">도서 관리</a>
        <a href="/admin/books/new">도서 등록</a>
    </div>
    <div class="container">
        <div th:if="${message}" class="message" th:text="${message}"></div>
        <form class="search-bar" action="/admin/books" method="get">
            <input type="text" name="keyword" placeholder="도서명, 저자, 설명으로 검색..."
                   th:value="${keyword}">
            <button type="submit" class="btn btn-primary">검색</button>
            <a th:if="${keyword}" href="/admin/books" class="btn btn-secondary">초기화</a>
        </form>
        <div class="toolbar">
            <h2>
                <span th:if="${keyword}">
                    '<span th:text="${keyword}">검색어</span>' 검색 결과
                    (<span th:text="${books.totalElements}">0</span>건)
                </span>
                <span th:unless="${keyword}">
                    도서 목록 (<span th:text="${books.totalElements}">0</span>건)
                </span>
            </h2>
            <a href="/admin/books/new" class="btn btn-primary">+ 새 도서 등록</a>
        </div>
        <div th:if="${books.totalElements == 0}" class="empty">
            등록된 도서가 없습니다. 새 도서를 등록해주세요.
        </div>
        <table th:if="${books.totalElements > 0}">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>도서명</th>
                    <th>저자</th>
                    <th>출판사</th>
                    <th>카테고리</th>
                    <th>가격</th>
                    <th>관리</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="book : ${books.content}">
                    <td th:text="${book.id}">1</td>
                    <td th:text="${book.title}">도서명</td>
                    <td th:text="${book.author}">저자</td>
                    <td th:text="${book.publisher}">출판사</td>
                    <td th:text="${book.category}">카테고리</td>
                    <td th:text="${book.price != null ? #numbers.formatInteger(book.price, 0, 'COMMA') + '원' : '-'}">0원</td>
                    <td class="actions">
                        <a th:href="@{'/admin/books/' + ${book.id} + '/edit'}" class="btn btn-primary btn-sm">수정</a>
                        <form th:action="@{'/admin/books/' + ${book.id} + '/delete'}" method="post"
                              onsubmit="return confirm('정말 삭제하시겠습니까?');" style="display:inline;">
                            <button type="submit" class="btn btn-danger btn-sm">삭제</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="pagination" th:if="${books.totalPages > 1}"
             th:with="queryParam=${keyword != null ? '&keyword=' + keyword : ''}">
            <a th:if="${books.number > 0}"
               th:href="@{'/admin/books?page=' + ${books.number - 1} + ${queryParam}}">이전</a>
            <th:block th:each="i : ${#numbers.sequence(0, books.totalPages - 1)}">
                <span th:if="${i == books.number}" class="current" th:text="${i + 1}">1</span>
                <a th:unless="${i == books.number}"
                   th:href="@{'/admin/books?page=' + ${i} + ${queryParam}}" th:text="${i + 1}">1</a>
            </th:block>
            <a th:if="${books.number < books.totalPages - 1}"
               th:href="@{'/admin/books?page=' + ${books.number + 1} + ${queryParam}}">다음</a>
        </div>
    </div>
</body>
</html>
